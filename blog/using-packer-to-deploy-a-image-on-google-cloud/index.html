<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Using Packer to deploy a image on Google Cloud - Kiran Chavala Tech Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="generator" content="Hugo 0.111.3"><meta itemprop="name" content="Using Packer to deploy a image on Google Cloud">
<meta itemprop="description" content="Packer is an open source tool that enables you to create identical machine images for multiple platforms from a single source template. A common use case is creating &ldquo;golden images&rdquo; that teams across an organization can use in cloud infrastructure.
There 2 ways to write the packer code to build the image
Using JSON formatted code Using HCL2 formatted code In order to interact with Google cloud we have to create a service account in GCP"><meta itemprop="datePublished" content="2021-12-01T15:05:48+05:30" />
<meta itemprop="dateModified" content="2021-12-01T15:05:48+05:30" />
<meta itemprop="wordCount" content="1396">
<meta itemprop="keywords" content="packer,Google cloud," /><meta property="og:title" content="Using Packer to deploy a image on Google Cloud" />
<meta property="og:description" content="Packer is an open source tool that enables you to create identical machine images for multiple platforms from a single source template. A common use case is creating &ldquo;golden images&rdquo; that teams across an organization can use in cloud infrastructure.
There 2 ways to write the packer code to build the image
Using JSON formatted code Using HCL2 formatted code In order to interact with Google cloud we have to create a service account in GCP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kiranchavala.in/blog/using-packer-to-deploy-a-image-on-google-cloud/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-12-01T15:05:48+05:30" />
<meta property="article:modified_time" content="2021-12-01T15:05:48+05:30" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using Packer to deploy a image on Google Cloud"/>
<meta name="twitter:description" content="Packer is an open source tool that enables you to create identical machine images for multiple platforms from a single source template. A common use case is creating &ldquo;golden images&rdquo; that teams across an organization can use in cloud infrastructure.
There 2 ways to write the packer code to build the image
Using JSON formatted code Using HCL2 formatted code In order to interact with Google cloud we have to create a service account in GCP"/>
<meta name="twitter:site" content="@kiranchavala"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-175465249-1', 'auto');
	
	ga('send', 'pageview');
}
</script><link rel="stylesheet" href="/css/bundle.min.93154d9a3b6e04b361239f2577c384010365596244e960fdbb5d3816d20ad2d7.css" integrity="sha256-kxVNmjtuBLNhI58ld8OEAQNlWWJE6WD9u104FtIK0tc="><link rel="stylesheet" href="/css/add-on.css">
</head>

  <body>
    

<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/" class="nav">
        
          Blog
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu menu">
      
        
          
          <a href="/" class="nav link"><i class='fa fa-home'></i> Home</a>
        
      
        
          
          <a href="/about/" class="nav link"><i class='far fa-id-card'></i> About</a>
        
      
        
          
          <a href="/blog/" class="nav link"><i class='far fa-newspaper'></i> Blog</a>
        
      
        
          
          <a href="/categories/" class="nav link"><i class='fas fa-sitemap'></i> Categories</a>
        
      
        
          
          <a href="/contact/" class="nav link"><i class='far fa-envelope'></i> Contact</a>
        
      
      <a href="#share-menu" class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
      <a href="#search-input" class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a>
    </menu>
    <a href="#search-input" class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
    <a href="#share-menu" class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
    <a href="#lang-menu" class="nav lang-toggle" lang="en">en</a>
    <a href="#site-nav" class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="search" class="menu"><input id="search-input" class="search-input menu"></input><div id="search-results" class="search-results menu"></div></menu>
  <menu id="lang-menu" class="flyout-menu menu">
  <a href="#" lang="en" class="nav link active">English (en)</a>
  
    
      
    
  
</menu>

  
    <menu id="share-menu" class="flyout-menu menu">
      <h1>Share Post</h1>
      




  
    
    <a href="//twitter.com/share?text=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud&amp;url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <p>Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <p>Facebook</p>
        </a>
  

  
    <a href="//www.reddit.com/submit?url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f&amp;title=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud" target="_blank" rel="noopener" class="nav share-btn reddit">
          <p>Reddit</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f&amp;title=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <p>LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&amp;body=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <p>Email</p>
        </a>
  


    </menu>
  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/"><img src="https://avatars2.githubusercontent.com/u/1401014?s=400&amp;v=4" class="circle" width="100" alt="Hugo Future Imperfect Slim" /></a>
  <header>
    <h1>Tech Notes</h1>
  </header>
  <main>
    <p>Linux,MAC,Docker,Kubernetes,<br>CloudStack,AWS,GCP,AZURE,<br> Raspberrypi,VMWARE,GO,BOOKS,<br>NETFLIX,Movies,Seasons</p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/kiranchavala" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>
<li><a href="//gitlab.com/kiranchavala" target="_blank" rel="noopener" title="GitLab" class="fab fa-gitlab"></a></li>
<li><a href="//stackoverflow.com/users/1806354" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>
<li><a href="//bitbucket.com/kiranchavala" target="_blank" rel="noopener" title="Bitbucket" class="fab fa-bitbucket"></a></li>



<li><a href="//flickr.com/photos/67247990@N06" target="_blank" rel="noopener" title="Flickr" class="fab fa-flickr"></a></li>


<li><a href="//kiranchavala.wordpress.com" target="_blank" rel="noopener" title="WordPress" class="fab fa-wordpress"></a></li>
<li><a href="//medium.com/@kiranchavala" target="_blank" rel="noopener" title="Medium" class="fab fa-medium"></a></li>
<li><a href="//linkedin.com/in/kiran-manohar-chavala-1bb6a97" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>
<li><a href="//linkedin.com/company/examplebusiness" target="_blank" rel="noopener" title="LinkedIn Company" class="fab fa-linkedin"></a></li>
<li><a href="//foursquare.com/kiranchavala" target="_blank" rel="noopener" title="Foursquare" class="fab fa-foursquare"></a></li>

<li><a href="//slideshare.com/kiranchavala" target="_blank" rel="noopener" title="SlideShare" class="fab fa-slideshare"></a></li>
<li><a href="//facebook.com/kiranchavala" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>
<li><a href="//reddit.com/user/neoiron" target="_blank" rel="noopener" title="Reddit" class="fab fa-reddit"></a></li>
<li><a href="//quora.com/profile/Kiran-Chavala-1" target="_blank" rel="noopener" title="Quora" class="fab fa-quora"></a></li>
<li><a href="//youtube.com/kiranchavala" target="_blank" rel="noopener" title="YouTube" class="fab fa-youtube"></a></li>
<li><a href="//vimeo.com/user21972749" target="_blank" rel="noopener" title="Vimeo" class="fab fa-vimeo"></a></li>
<li><a href="//api.whatsapp.com/send?phone=9902141683" target="_blank" rel="noopener" title="WhatsApp" class="fab fa-whatsapp"></a></li>



<li><a href="//instagram.com/kiranchavala" target="_blank" rel="noopener" title="Instagram" class="fab fa-instagram"></a></li>
<li><a href="//kiranchavala-blog.tumblr.com" target="_blank" rel="noopener" title="Tumblr" class="fab fa-tumblr"></a></li>
<li><a href="//twitter.com/kiranchavala" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>
<li><a href="//strava.com/athletes/3822003" target="_blank" rel="noopener" title="Strava" class="fab fa-strava"></a></li>
<li><a href="skype:kiranchavala?userinfo" target="_blank" rel="noopener" title="Skype" class="fab fa-skype"></a></li>

<li><a href="//pinterest.com/kiranchavala" target="_blank" rel="noopener" title="Pinterest" class="fab fa-pinterest-p"></a></li>
<li><a href="//telegram.me/neoiron" target="_blank" rel="noopener" title="telegram" class="fab fa-telegram"></a></li>




<li><a href="//keybase.io/kiranchavala" target="_blank" rel="noopener" title="keybase" class="fab fa-keybase"></a></li>
<li><a href="//mastodon.social/@kiranchavala" target="_blank" rel="noopener" title="mastodon" class="fab fa-mastodon"></a></li>
<li><a href="mailto:kiranchavala@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        
  <article class="post">
    <header>
  <div class="title">
    
      <h2><a href="/blog/using-packer-to-deploy-a-image-on-google-cloud/">Using Packer to deploy a image on Google Cloud</a></h2>
    
    
  </div>
  <div class="meta">
    <time datetime="2021-12-01 15:05:48 &#43;0530 IST">December 1, 2021</time>
    
    <p>7-Minute Read</p>
  </div>
</header>

    <div id="socnet-share">
      




  
    
    <a href="//twitter.com/share?text=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud&amp;url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <p>Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <p>Facebook</p>
        </a>
  

  
    <a href="//www.reddit.com/submit?url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f&amp;title=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud" target="_blank" rel="noopener" class="nav share-btn reddit">
          <p>Reddit</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f&amp;title=Using%20Packer%20to%20deploy%20a%20image%20on%20Google%20Cloud" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <p>LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&amp;body=https%3a%2f%2fkiranchavala.in%2fblog%2fusing-packer-to-deploy-a-image-on-google-cloud%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <p>Email</p>
        </a>
  


    </div>
    <div class="content">
      
      <p>Packer is an open source tool that enables you to create identical machine images for multiple platforms from a single source template. A common use case is creating &ldquo;golden images&rdquo; that teams across an organization can use in cloud infrastructure.</p>
<p>There 2 ways to write the packer code to build the image</p>
<pre><code> Using JSON formatted code
 Using HCL2 formatted code
</code></pre>
<hr>
<p>In order to interact with Google cloud we have to create a service account in GCP</p>
<ol>
<li>Create a service account in google cloud, we will use the service account to deploy the images in Google cloud</li>
</ol>
<p>Identify the project associated with your google cloud account</p>
<pre tabindex="0"><code>
~❯ gcloud config get-value project                                                                                                                                                           
terraform-325207
</code></pre><ol start="2">
<li>Replace the project id in the below commands</li>
</ol>
<pre tabindex="0"><code>
1 .gcloud iam service-accounts create packer   --project terraform-325207  --description=&#34;Packer Service Account&#34;   --display-name=&#34;Packer Service Account&#34;

Created service account [packer]


2. gcloud projects add-iam-policy-binding terraform-325207     --member=serviceAccount:packer@terraform-325207.iam.gserviceaccount.com    --role=roles/compute.instanceAdmin.v1

Updated IAM policy for project [terraform-325207].
bindings:
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/compute.instanceAdmin.v1
- members:
  - serviceAccount:service-1065616354729@compute-system.iam.gserviceaccount.com
  role: roles/compute.serviceAgent
- members:
  - serviceAccount:1065616354729-compute@developer.gserviceaccount.com
  - serviceAccount:1065616354729@cloudservices.gserviceaccount.com
  role: roles/editor
- members:
  - user:kiran.sit@gmail.com
  role: roles/owner
etag: BwXQ5hY047U=
version: 1


3. gcloud projects add-iam-policy-binding terraform-325207      --member=serviceAccount:packer@terraform-325207.iam.gserviceaccount.com     --role=roles/iam.serviceAccountUser              

Updated IAM policy for project [terraform-325207].
bindings:
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/compute.instanceAdmin.v1
- members:
  - serviceAccount:service-1065616354729@compute-system.iam.gserviceaccount.com
  role: roles/compute.serviceAgent
- members:
  - serviceAccount:1065616354729-compute@developer.gserviceaccount.com
  - serviceAccount:1065616354729@cloudservices.gserviceaccount.com
  role: roles/editor
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/iam.serviceAccountUser
- members:
  - user:kiran.sit@gmail.com
  role: roles/owner
etag: BwXQ5iqxahY=
version: 1



4. gcloud projects add-iam-policy-binding terraform-325207    --member=serviceAccount:packer@terraform-325207.iam.gserviceaccount.com    --role=roles/iap.tunnelResourceAccessor

Updated IAM policy for project [terraform-325207].
bindings:
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/compute.instanceAdmin.v1
- members:
  - serviceAccount:service-1065616354729@compute-system.iam.gserviceaccount.com
  role: roles/compute.serviceAgent
- members:
  - serviceAccount:1065616354729-compute@developer.gserviceaccount.com
  - serviceAccount:1065616354729@cloudservices.gserviceaccount.com
  role: roles/editor
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/iam.serviceAccountUser
- members:
  - serviceAccount:packer@terraform-325207.iam.gserviceaccount.com
  role: roles/iap.tunnelResourceAccessor
- members:
  - user:kiran.sit@gmail.com
  role: roles/owner
etag: BwXQ5jBDseY=
version: 1
</code></pre><ol start="3">
<li>Create an API key for the service account</li>
</ol>
<p>Home&gt;IAM &gt;Service account&gt; click on the service account &gt; ADD key &gt; Save the json file in the folder</p>
<p>Using json format to create an image in Google cloud</p>
<pre tabindex="0"><code>
~❯ mkdir -p  packer_templates
~❯ cd packer_templates
~❯ mkdir -p gcp

~❯ vi gcp-webserver.json

{
    &#34;builders&#34;: [{
      &#34;type&#34;: &#34;googlecompute&#34;,
      &#34;account_file&#34;: &#34;terraform-325207-39ea61c5c3ce.json&#34;,
      &#34;project_id&#34;: &#34;terraform-325207&#34;,
      &#34;source_image&#34;: &#34;ubuntu-1804-bionic-v20211021&#34;,
      &#34;ssh_username&#34;: &#34;packer&#34;,    
      &#34;zone&#34;: &#34;us-central1-a&#34;,
      &#34;region&#34;: &#34;us-central1&#34;,
      &#34;machine_type&#34;: &#34;n1-standard-1&#34;,
      &#34;image_description&#34;: &#34;custom machine image&#34;,
      &#34;image_name&#34;: &#34;mypackerimage&#34;,
      &#34;disk_size&#34;: 10,
      &#34;network&#34;: &#34;kiran-vpc2&#34;,
      &#34;subnetwork&#34;: &#34;kiran-vpc2&#34;
      
    }],
    &#34;provisioners&#34;: [
        {
          &#34;type&#34;: &#34;file&#34;,
          &#34;source&#34;: &#34;index.html&#34;,
          &#34;destination&#34;: &#34;/tmp/index.html&#34;
        },
        {
         &#34;type&#34;: &#34;shell&#34;,
         &#34;scripts&#34;: [
           &#34;install.sh&#34;,
           &#34;post-install.sh&#34;
         ]
       }
     ]
  }

~❯ vi install.sh

 

 


#!/bin/sh -x

# Install nginx
sudo apt-get -yqq install nginx

# Create website directory
sudo mkdir -p /var/www/website

# Move index.html to directory
sudo mv /tmp/index.html /var/www/website/


 

~❯ cat post-install.sh

#!/bin/sh -x

# Run nginx at boot
sudo systemctl enable nginx

 

~❯ cat index.html   

 

&lt;html&gt;

 &lt;head&gt;

  &lt;title&gt;This is a website&lt;/title&gt;

 &lt;/head&gt;

 &lt;body&gt;

  &lt;h1&gt;This is a website&lt;/h1&gt;

 &lt;/body&gt;
&lt;/html
</code></pre><p>Validate the code</p>
<pre tabindex="0"><code>
~/packer_templates/gcp ❯ packer validate gcp-webserver.json                                                                                                                                                                 
 
The configuration is valid.
</code></pre><p>Build The image</p>
<p>~/packer_templates/gcp ❯ packer build gcp-webserver.json</p>
<hr>
<p>Using HCL 2 format to create an image in Google cloud</p>
<pre tabindex="0"><code>~❯vi gcp-webserver.pkr.hcl

packer {
  required_plugins {
    googlecompute = {
      version = &#34;&gt;= 0.0.1&#34;
      source = &#34;github.com/hashicorp/googlecompute&#34;
    }
  }
}


source &#34;googlecompute&#34; &#34;ubuntu&#34; {
 account_file = &#34;terraform-325207-39ea61c5c3ce.json&#34;
 project_id  = &#34;terraform-325207&#34;
 source_image = &#34;ubuntu-1804-bionic-v20211021&#34;
 ssh_username = &#34;packer&#34;    
 zone =&#34;us-central1-a&#34;
 region = &#34;us-central1&#34;
 machine_type = &#34;n1-standard-1&#34;
 image_description = &#34;custom machine image&#34;
 image_name = &#34;mypackerimage&#34;
 disk_size = 10
 network = &#34;kiran-vpc2&#34;
 subnetwork = &#34;kiran-vpc2&#34; 




  
}

build {
  sources = [&#34;sources.googlecompute.ubuntu&#34;]


provisioner &#34;file&#34; {
    destination = &#34;/tmp/index.html&#34;
    source      = &#34;index.html&#34;
  }

  provisioner &#34;shell&#34; {
    scripts = [&#34;install.sh&#34;, &#34;post-install.sh&#34;]
  }

    }
</code></pre><p>Validate the code</p>
<pre tabindex="0"><code>
~/packer_templates/gcp ❯ packer validate gcp-webserver.pkr.hcl                                                                                                                                                               
The configuration is valid.
</code></pre><p>Initialize Packer configuration</p>
<pre tabindex="0"><code>~/packer_templates/gcp ❯ packer init 
.                                                                                                                                                                               
 
Installed plugin github.com/hashicorp/googlecompute v1.0.6 in &#34;/opt/homebrew/bin/github.com/hashicorp/googlecompute/packer-plugin-googlecompute_v1.0.6_x5.0_darwin_arm64&#34;
</code></pre><p>Build the Image</p>
<pre tabindex="0"><code>~/packer_templates/gcp ❯ packer build gcp-webserver.pkr.hcl                                                                                                                                                                     
googlecompute.ubuntu: output will be in this color.

==&gt; googlecompute.ubuntu: Checking image does not exist...
==&gt; googlecompute.ubuntu: Creating temporary RSA SSH key for instance...
==&gt; googlecompute.ubuntu: Using image: ubuntu-1804-bionic-v20211021
==&gt; googlecompute.ubuntu: Creating instance...
    googlecompute.ubuntu: Loading zone: us-central1-a
    googlecompute.ubuntu: Loading machine type: n1-standard-1
    googlecompute.ubuntu: Requesting instance creation...
    googlecompute.ubuntu: Waiting for creation operation to complete...
    googlecompute.ubuntu: Instance has been created!
==&gt; googlecompute.ubuntu: Waiting for the instance to become running...
    googlecompute.ubuntu: IP: 34.121.55.19
==&gt; googlecompute.ubuntu: Using SSH communicator to connect: 34.121.55.19
==&gt; googlecompute.ubuntu: Waiting for SSH to become available...
==&gt; googlecompute.ubuntu: Connected to SSH!
==&gt; googlecompute.ubuntu: Uploading index.html =&gt; /tmp/index.html
    googlecompute.ubuntu: index.html 119 B / 119 B [======================================================================================================================================================================] 100.00% 1s
==&gt; googlecompute.ubuntu: Provisioning with shell script: install.sh
==&gt; googlecompute.ubuntu: + sudo apt-get -yqq install nginx
==&gt; googlecompute.ubuntu: debconf: unable to initialize frontend: Dialog
==&gt; googlecompute.ubuntu: debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
==&gt; googlecompute.ubuntu: debconf: falling back to frontend: Readline
==&gt; googlecompute.ubuntu: debconf: unable to initialize frontend: Readline
==&gt; googlecompute.ubuntu: debconf: (This frontend requires a controlling tty.)
==&gt; googlecompute.ubuntu: debconf: falling back to frontend: Teletype
==&gt; googlecompute.ubuntu: dpkg-preconfigure: unable to re-open stdin:
    googlecompute.ubuntu: Selecting previously unselected package libjpeg-turbo8:amd64.
    googlecompute.ubuntu: (Reading database ... 65629 files and directories currently installed.)
    googlecompute.ubuntu: Preparing to unpack .../00-libjpeg-turbo8_1.5.2-0ubuntu5.18.04.4_amd64.deb ...
    googlecompute.ubuntu: Unpacking libjpeg-turbo8:amd64 (1.5.2-0ubuntu5.18.04.4) ...
    googlecompute.ubuntu: Selecting previously unselected package fonts-dejavu-core.
    googlecompute.ubuntu: Preparing to unpack .../01-fonts-dejavu-core_2.37-1_all.deb ...
    googlecompute.ubuntu: Unpacking fonts-dejavu-core (2.37-1) ...
    googlecompute.ubuntu: Selecting previously unselected package fontconfig-config.
    googlecompute.ubuntu: Preparing to unpack .../02-fontconfig-config_2.12.6-0ubuntu2_all.deb ...
    googlecompute.ubuntu: Unpacking fontconfig-config (2.12.6-0ubuntu2) ...
    googlecompute.ubuntu: Selecting previously unselected package libfontconfig1:amd64.
    googlecompute.ubuntu: Preparing to unpack .../03-libfontconfig1_2.12.6-0ubuntu2_amd64.deb ...
    googlecompute.ubuntu: Unpacking libfontconfig1:amd64 (2.12.6-0ubuntu2) ...
    googlecompute.ubuntu: Selecting previously unselected package libjpeg8:amd64.
    googlecompute.ubuntu: Preparing to unpack .../04-libjpeg8_8c-2ubuntu8_amd64.deb ...
    googlecompute.ubuntu: Unpacking libjpeg8:amd64 (8c-2ubuntu8) ...
    googlecompute.ubuntu: Selecting previously unselected package libjbig0:amd64.
    googlecompute.ubuntu: Preparing to unpack .../05-libjbig0_2.1-3.1build1_amd64.deb ...
    googlecompute.ubuntu: Unpacking libjbig0:amd64 (2.1-3.1build1) ...
    googlecompute.ubuntu: Selecting previously unselected package libtiff5:amd64.
    googlecompute.ubuntu: Preparing to unpack .../06-libtiff5_4.0.9-5ubuntu0.4_amd64.deb ...
    googlecompute.ubuntu: Unpacking libtiff5:amd64 (4.0.9-5ubuntu0.4) ...
    googlecompute.ubuntu: Selecting previously unselected package libwebp6:amd64.
    googlecompute.ubuntu: Preparing to unpack .../07-libwebp6_0.6.1-2ubuntu0.18.04.1_amd64.deb ...
    googlecompute.ubuntu: Unpacking libwebp6:amd64 (0.6.1-2ubuntu0.18.04.1) ...
    googlecompute.ubuntu: Selecting previously unselected package libxpm4:amd64.
    googlecompute.ubuntu: Preparing to unpack .../08-libxpm4_1%3a3.5.12-1_amd64.deb ...
    googlecompute.ubuntu: Unpacking libxpm4:amd64 (1:3.5.12-1) ...
    googlecompute.ubuntu: Selecting previously unselected package libgd3:amd64.
    googlecompute.ubuntu: Preparing to unpack .../09-libgd3_2.2.5-4ubuntu0.5_amd64.deb ...
    googlecompute.ubuntu: Unpacking libgd3:amd64 (2.2.5-4ubuntu0.5) ...
    googlecompute.ubuntu: Selecting previously unselected package nginx-common.
    googlecompute.ubuntu: Preparing to unpack .../10-nginx-common_1.14.0-0ubuntu1.9_all.deb ...
    googlecompute.ubuntu: Unpacking nginx-common (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package libnginx-mod-http-geoip.
    googlecompute.ubuntu: Preparing to unpack .../11-libnginx-mod-http-geoip_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking libnginx-mod-http-geoip (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package libnginx-mod-http-image-filter.
    googlecompute.ubuntu: Preparing to unpack .../12-libnginx-mod-http-image-filter_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking libnginx-mod-http-image-filter (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package libnginx-mod-http-xslt-filter.
    googlecompute.ubuntu: Preparing to unpack .../13-libnginx-mod-http-xslt-filter_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking libnginx-mod-http-xslt-filter (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package libnginx-mod-mail.
    googlecompute.ubuntu: Preparing to unpack .../14-libnginx-mod-mail_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking libnginx-mod-mail (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package libnginx-mod-stream.
    googlecompute.ubuntu: Preparing to unpack .../15-libnginx-mod-stream_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking libnginx-mod-stream (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package nginx-core.
    googlecompute.ubuntu: Preparing to unpack .../16-nginx-core_1.14.0-0ubuntu1.9_amd64.deb ...
    googlecompute.ubuntu: Unpacking nginx-core (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Selecting previously unselected package nginx.
    googlecompute.ubuntu: Preparing to unpack .../17-nginx_1.14.0-0ubuntu1.9_all.deb ...
    googlecompute.ubuntu: Unpacking nginx (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up libjbig0:amd64 (2.1-3.1build1) ...
    googlecompute.ubuntu: Setting up fonts-dejavu-core (2.37-1) ...
    googlecompute.ubuntu: Setting up nginx-common (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: debconf: unable to initialize frontend: Dialog
    googlecompute.ubuntu: debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
    googlecompute.ubuntu: debconf: falling back to frontend: Readline
    googlecompute.ubuntu: Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /lib/systemd/system/nginx.service.
    googlecompute.ubuntu: Setting up libjpeg-turbo8:amd64 (1.5.2-0ubuntu5.18.04.4) ...
    googlecompute.ubuntu: Setting up libnginx-mod-mail (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up libxpm4:amd64 (1:3.5.12-1) ...
    googlecompute.ubuntu: Setting up libnginx-mod-http-xslt-filter (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up libnginx-mod-http-geoip (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up libwebp6:amd64 (0.6.1-2ubuntu0.18.04.1) ...
    googlecompute.ubuntu: Setting up libjpeg8:amd64 (8c-2ubuntu8) ...
    googlecompute.ubuntu: Setting up fontconfig-config (2.12.6-0ubuntu2) ...
    googlecompute.ubuntu: Setting up libnginx-mod-stream (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up libtiff5:amd64 (4.0.9-5ubuntu0.4) ...
    googlecompute.ubuntu: Setting up libfontconfig1:amd64 (2.12.6-0ubuntu2) ...
    googlecompute.ubuntu: Setting up libgd3:amd64 (2.2.5-4ubuntu0.5) ...
    googlecompute.ubuntu: Setting up libnginx-mod-http-image-filter (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up nginx-core (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Setting up nginx (1.14.0-0ubuntu1.9) ...
    googlecompute.ubuntu: Processing triggers for systemd (237-3ubuntu10.52) ...
    googlecompute.ubuntu: Processing triggers for man-db (2.8.3-2ubuntu0.1) ...
    googlecompute.ubuntu: Processing triggers for ufw (0.36-0ubuntu0.18.04.1) ...
    googlecompute.ubuntu: Processing triggers for ureadahead (0.100.0-21) ...
    googlecompute.ubuntu: Processing triggers for libc-bin (2.27-3ubuntu1.4) ...
==&gt; googlecompute.ubuntu: + sudo mkdir -p /var/www/website
==&gt; googlecompute.ubuntu: + sudo mv /tmp/index.html /var/www/website/
==&gt; googlecompute.ubuntu: Provisioning with shell script: post-install.sh
==&gt; googlecompute.ubuntu: + sudo systemctl enable nginx
==&gt; googlecompute.ubuntu: Synchronizing state of nginx.service with SysV service script with /lib/systemd/systemd-sysv-install.
==&gt; googlecompute.ubuntu: Executing: /lib/systemd/systemd-sysv-install enable nginx
==&gt; googlecompute.ubuntu: Deleting instance...
    googlecompute.ubuntu: Instance has been deleted!
==&gt; googlecompute.ubuntu: Creating image...
==&gt; googlecompute.ubuntu: Deleting disk...
    googlecompute.ubuntu: Disk has been deleted!
Build &#39;googlecompute.ubuntu&#39; finished after 2 minutes 43 seconds.

==&gt; Wait completed after 2 minutes 43 seconds

==&gt; Builds finished. The artifacts of successful builds are:
--&gt; googlecompute.ubuntu: A disk image was created: mypackerimage
</code></pre><p>Ref:
<a href="https://blog.searce.com/build-machine-images-with-packer-on-google-cloud-platform-b43f77f1acd">https://blog.searce.com/build-machine-images-with-packer-on-google-cloud-platform-b43f77f1acd</a>
<a href="https://www.packer.io/docs/builders/googlecompute">https://www.packer.io/docs/builders/googlecompute</a></p>
<p><a href="https://www.youtube.com/watch?v=lSumUuZT_B8&amp;t=943s">https://www.youtube.com/watch?v=lSumUuZT_B8&amp;t=943s</a></p>

    </div>
    <footer>
      <div class="stats">
  
    <ul class="categories">
      
        
          <li><a class="article-terms-link" href="/categories/packer/">packer</a></li>
        
          <li><a class="article-terms-link" href="/categories/google-cloud/">Google cloud</a></li>
        
      
    </ul>
  
  
    <ul class="tags">
      
        
          <li><a class="article-terms-link" href="/tags/packer/">packer</a></li>
        
          <li><a class="article-terms-link" href="/tags/google-cloud/">Google cloud</a></li>
        
      
    </ul>
  
</div>

    </footer>
  </article>
  
    
  <article class="post">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "kiranchavala-in" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>




  
  <div class="pagination">
    
      <a href="/blog/using-cloud-init-in-cloudstack/" class="button left"><span>Using Cloudinit in Cloudstack</span></a>
    
    
      <a href="/blog/creating-kubernetes-cluster-via-vagrant/" class="button right"><span>Creating Kubernetes Cluster via Vagrant</span></a>
    
  </div>

      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent Posts</h1>
      </header>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/building-cloudstack-on-ubuntu-22.04/">Building Cloudstack on Ubuntu 22.04</a></h2>
          <time class="published" datetime="2023-05-01 13:39:22 &#43;0530 IST">May 1, 2023</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/building-cloudstack-on-mac-os/">Building Cloudstack on Mac Os</a></h2>
          <time class="published" datetime="2023-05-01 11:50:51 &#43;0530 IST">May 1, 2023</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/using-cloud-init-in-cloudstack/">Using Cloudinit in Cloudstack</a></h2>
          <time class="published" datetime="2022-11-10 11:48:50 &#43;0530 IST">November 10, 2022</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/using-packer-to-deploy-a-image-on-google-cloud/">Using Packer to deploy a image on Google Cloud</a></h2>
          <time class="published" datetime="2021-12-01 15:05:48 &#43;0530 IST">December 1, 2021</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/creating-kubernetes-cluster-via-vagrant/">Creating Kubernetes Cluster via Vagrant</a></h2>
          <time class="published" datetime="2021-09-27 12:31:52 &#43;0530 IST">September 27, 2021</time>
        </header>
      </article>
      
      
        <footer>
          <a href="/blog/" class="button">See More</a>
        </footer>
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="/categories">Categories</a></h1>
        </header>
        <ul>
          
          
          <li>
              <a href="/categories/kubernetes/">kubernetes<span class="count">7</span></a>
          
          <li>
              <a href="/categories/cloudstack/">cloudstack<span class="count">5</span></a>
          
          <li>
              <a href="/categories/sw/">sw<span class="count">3</span></a>
          
          <li>
              <a href="/categories/docker/">docker<span class="count">2</span></a>
          
          <li>
              <a href="/categories/mac/">mac<span class="count">2</span></a>
          
          <li>
              <a href="/categories/terraform/">terraform<span class="count">2</span></a>
          
          <li>
              <a href="/categories/aws/">aws<span class="count">1</span></a>
          
          <li>
              <a href="/categories/azure/">azure<span class="count">1</span></a>
          
          <li>
              <a href="/categories/centos/">centos<span class="count">1</span></a>
          
          <li>
              <a href="/categories/gcp/">gcp<span class="count">1</span></a>
          
          <li>
              <a href="/categories/google-cloud/">google-cloud<span class="count">1</span></a>
          
          <li>
              <a href="/categories/openstack/">openstack<span class="count">1</span></a>
          
          <li>
              <a href="/categories/packer/">packer<span class="count">1</span></a>
          
          <li>
              <a href="/categories/raspberrypi/">raspberrypi<span class="count">1</span></a>
          
          <li>
              <a href="/categories/terraformer/">terraformer<span class="count">1</span></a>
          
          <li>
              <a href="/categories/ubuntu/">ubuntu<span class="count">1</span></a>
          
          <li>
              <a href="/categories/vmware/">vmware<span class="count">1</span></a>
          
          <li>
              <a href="/categories/xenserver/">xenserver<span class="count">1</span></a>
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>I am a Software Engineer at Persistent Systems, working on Cloud Stack Orchestration and various tech related to Cloud Infra, container technology like Docker, Kubernetes</p>
      <footer>
        <a href="/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/kiranchavala" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>
<li><a href="//gitlab.com/kiranchavala" target="_blank" rel="noopener" title="GitLab" class="fab fa-gitlab"></a></li>
<li><a href="//stackoverflow.com/users/1806354" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>
<li><a href="//bitbucket.com/kiranchavala" target="_blank" rel="noopener" title="Bitbucket" class="fab fa-bitbucket"></a></li>



<li><a href="//flickr.com/photos/67247990@N06" target="_blank" rel="noopener" title="Flickr" class="fab fa-flickr"></a></li>


<li><a href="//kiranchavala.wordpress.com" target="_blank" rel="noopener" title="WordPress" class="fab fa-wordpress"></a></li>
<li><a href="//medium.com/@kiranchavala" target="_blank" rel="noopener" title="Medium" class="fab fa-medium"></a></li>
<li><a href="//linkedin.com/in/kiran-manohar-chavala-1bb6a97" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>
<li><a href="//linkedin.com/company/examplebusiness" target="_blank" rel="noopener" title="LinkedIn Company" class="fab fa-linkedin"></a></li>
<li><a href="//foursquare.com/kiranchavala" target="_blank" rel="noopener" title="Foursquare" class="fab fa-foursquare"></a></li>

<li><a href="//slideshare.com/kiranchavala" target="_blank" rel="noopener" title="SlideShare" class="fab fa-slideshare"></a></li>
<li><a href="//facebook.com/kiranchavala" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>
<li><a href="//reddit.com/user/neoiron" target="_blank" rel="noopener" title="Reddit" class="fab fa-reddit"></a></li>
<li><a href="//quora.com/profile/Kiran-Chavala-1" target="_blank" rel="noopener" title="Quora" class="fab fa-quora"></a></li>
<li><a href="//youtube.com/kiranchavala" target="_blank" rel="noopener" title="YouTube" class="fab fa-youtube"></a></li>
<li><a href="//vimeo.com/user21972749" target="_blank" rel="noopener" title="Vimeo" class="fab fa-vimeo"></a></li>
<li><a href="//api.whatsapp.com/send?phone=9902141683" target="_blank" rel="noopener" title="WhatsApp" class="fab fa-whatsapp"></a></li>



<li><a href="//instagram.com/kiranchavala" target="_blank" rel="noopener" title="Instagram" class="fab fa-instagram"></a></li>
<li><a href="//kiranchavala-blog.tumblr.com" target="_blank" rel="noopener" title="Tumblr" class="fab fa-tumblr"></a></li>
<li><a href="//twitter.com/kiranchavala" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>
<li><a href="//strava.com/athletes/3822003" target="_blank" rel="noopener" title="Strava" class="fab fa-strava"></a></li>
<li><a href="skype:kiranchavala?userinfo" target="_blank" rel="noopener" title="Skype" class="fab fa-skype"></a></li>

<li><a href="//pinterest.com/kiranchavala" target="_blank" rel="noopener" title="Pinterest" class="fab fa-pinterest-p"></a></li>
<li><a href="//telegram.me/neoiron" target="_blank" rel="noopener" title="telegram" class="fab fa-telegram"></a></li>




<li><a href="//keybase.io/kiranchavala" target="_blank" rel="noopener" title="keybase" class="fab fa-keybase"></a></li>
<li><a href="//mastodon.social/@kiranchavala" target="_blank" rel="noopener" title="mastodon" class="fab fa-mastodon"></a></li>
<li><a href="mailto:kiranchavala@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    © 2023 Kiran Chavala Tech Notes
      <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.111.3' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      <script src="/js/highlight.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script><script src="/js/bundle.min.beccc0b0a264507fba1f44b76ea0acc58d95d2b17bfde9661b4f4806a69b6b99.js" integrity="sha256-vszAsKJkUH&#43;6H0S3bqCsxY2V0rF7/elmG09IBqaba5k="></script>
    <script src="/js/add-on.js"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-175465249-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    </div>
  </body>
</html>
